= Documentation
:jbake-type: page
:jbake-status: published
:jbake-tags: dance
:idprefix:

:toc:
:toclevels: 5
:toc-placement: macro
toc::[]

== Infrastructure
Here everything will be described, what we utilize to

 1. develop our project
 1. deploy and run our project

=== Develop
To be written

=== Deploy and Run

We are planing to deploy our project in the link:https://www.hetzner.de/cloud[Hetzner Cloud].

[plantuml, cloud-architecture, svg]
....
@startuml
left to right direction
actor user
actor deployer
component browser
cloud VPC {
   database db
   boundary loadbalancer
   node {
     node dancer1
     node dancer2
     node dancern
   }
}
user -- browser
browser -- loadbalancer
loadbalancer -- dancer1
loadbalancer -- dancer2
loadbalancer -- dancern
dancer1 -- db
dancer2 -- db
dancern -- db

deployer -- dancer1
deployer -- dancer2
deployer -- dancern

@enduml
....

At least for the link:/project/index.html[first iteration] our running
setup in the cloud will cover three different services:

 1. A load balancer like link:https://containo.us/traefik/[Traefik] +
    This will be the only component the will receive direct traffic
    from users from the internet. It will sit on the limes of our
    link:https://en.wikipedia.org/wiki/Virtual_private_cloud[VPC]
    and act as an link:https://en.wikipedia.org/wiki/TLS_termination_proxy[SSL terminating proxy].
    The traffic will be forwarded into the VPC to the dancer component, that
    contain our main application. +
    When the traffic demand it (not in the nearer future, we are not that
    optimistic) the loadbalancer will distribute the incoming request in a
link:https://www.nginx.com/resources/glossary/round-robin-load-balancing/[round robin]
    fashion.
 1. Our one one only main component the *dancer* +
    Sits between the load balancer and the database. Is reachable for
    deployment from the deployer for releasing new versions.
 1. Our Database Server like link:https://www.postgresql.org/[PostgreSQL] +
    Will have a connection


We will wrap all above mentioned components into Docker Containers, to
unify the process of deploying each of them.

== Useful links

* All that relates to using setting up a loacbalancer/reverse proxy
** link:https://github.com/jwilder/nginx-proxy[Docker image from J Wilder] +
   Use NGINX in Docker to act as an SSL teminating proxy for eg internal Web-Hosts
** link:https://www.freecodecamp.org/news/docker-nginx-letsencrypt-easy-secure-reverse-proxy-40165ba3aee2/[Howto NGINX Docker letsencript (codecamp)]
** link:https://www.embarc.de/services-verbinden-nginx-reverse-proxy-docker-micro-moves-bauteil-4/[Howto NGINX Docker(embarc)]
** link:https://docs.traefik.io/v1.7/user-guide/docker-and-lets-encrypt/[Traefik/SSL/Docker]

* CI/CD
** Curated list of awesome GitHub Actions: list of cool actions
   grouped by use case: link:https://github.com/sdras/awesome-actions[here]

* Document as code
** link:https://docs-as-co.de/[Doc as code]
** link:https://plantuml.com/[Plant UML]
** link:https://asciidoctor.org/[Asciidoctor]
** link:https://www.informatik-aktuell.de/entwicklung/methoden/docs-as-code-alles-unter-einem-dach.html[Second link, same topic]

* Spring related
** link:https://spring.io/guides/tutorials/react-and-spring-data-rest/[React and Spring Data Rest Tutorial]
** link:https://medium.com/@asegu/why-a-spring-boot-developer-could-die-without-spring-boot-starter-properties-11c5d6bf459a[Why a spring boot developer could die without spring boot starter properties]

* Docker
** link:https://medium.com/@shrikarvk/creating-a-docker-container-for-spring-boot-app-d5ff1050c14f[Medium: Create Docker Images for Spring Boot Applications]
** link:https://medium.com/faun/dockerize-your-java-application-ec7ac056d066[Dockerize your Java Application]
** link:https://spring.io/guides/gs/spring-boot-docker/[Spring Guides: create Docker image from Boot Application]

* Python
** link:https://janakiev.com/blog/python-shell-commands/[Invoke Shell commands in Python]

* Bash
** link:https://stackoverflow.com/questions/1378274/in-a-bash-script-how-can-i-exit-the-entire-script-if-a-certain-condition-occurs[Exit on error]

* General Coding
** link:https://medium.com/refactor-zone/why-immutability-matters-b43d370fea75[Why Immutability Matters]
** link:https://blogs.oracle.com/javamagazine/records-come-to-java[Records come to Java]
** link:https://medium.com/swlh/exception-handling-in-java-streams-5947e48f671c[Expections in Java Streams]
** link:https://medium.com/mobidroid/java-design-patterns-creational-patterns-overview-b03617c1e939[Java Design Patterns: Creational Patterns Overview]
** link:https://medium.com/@jubin.kuriakose/modular-programming-in-java-42788ec02268[Modular Programming in Java]
** link:https://medium.com/swlh/multi-tenancy-implementation-using-spring-boot-hibernate-6a8e3ecb251a[Multi Tenancy Implementation]


* Team
** link:https://hbr.org/2019/03/the-feedback-fallacy[The feedback fallacy]